import express from "express";
import { deleteUser, getUserById, getUsers, loginUser, registerUser, unlockAccount, updateCurrentUser, getCurrentUser, uploadProfileImage, deleteProfileImage, upload, changePassword, deleteCurrentUser, } from "../controllers/userController.js";
import userValidate from "../middlewares/userValidate.js";
import { authenticateToken } from "../middlewares/authMiddleware.js";
const userRouter = express.Router();
userRouter.get("/", getUsers);
userRouter.post("/register", userValidate, registerUser);
userRouter.post("/login", loginUser);
userRouter.get("/unlock-account", unlockAccount);
userRouter.get("/me", authenticateToken, getCurrentUser);
userRouter.put("/me", authenticateToken, updateCurrentUser);
userRouter.delete("/me", authenticateToken, deleteCurrentUser);
userRouter.post("/me/change-password", authenticateToken, changePassword);
userRouter.post("/me/upload-image", authenticateToken, upload.single("avatar"), uploadProfileImage);
userRouter.delete("/me/delete-image", authenticateToken, deleteProfileImage);
userRouter.get("/:id", getUserById);
userRouter.delete("/:id", authenticateToken, deleteUser);
export default userRouter;
